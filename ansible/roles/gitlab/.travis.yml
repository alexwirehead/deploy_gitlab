language: python
python:
- '3.6'
install:
- pip install ansible molecule apache-libcloud paramiko
script:
- molecule create
- molecule converge
- molecule verify
after_script:
- molecule destroy
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/cred.json"
  global:
  - secure: auGb5x8o77miQL0hMb70xwdmuwdUWOPz1Pm4vJ1qv9QeGfT74/uQOt/d5f8ZwWji43HJR/TqWG+thIsg/2SjDzMN30FHXs9qvYZ470LgHSdTzaW5nHdteDAajCt8+4oQcc7/muOW0oKAOrQf8087d1ZX0J4tB0WOKxDFlR4SELDyV8mjy8tr82kbgsbMBAdJyN0jId+Han8hAes1I6ptdOUyK2m0mLpfl/7BAfIDtc93IbY0Hw7olYsxtgLeCty49zoJSUhyH7NMJAxM/7tDFBckkRbkSWV9ytYuoo47rmV8rinw0NJreGAsiuETq4C4tnsGPzA7XyKed3CXhBb76tnlxzYSx5/pvI3fbZEE7D3qkH/vEpsEncdOie6CvajVDN5e5UX+WnEhFZibZeA/iYYCnyWpWy6nAfZJNDs10QPIB8fpmn3cxtxI6Z3GRimbylhdXQmpGNgLbsJQIBu1ZYdbreIgt4WA2812eB47TTgNGbppKQmF7jcc/CHi/K1JtTcRnPfc0RNdSqTGZiDt/nO+pP1MP0PDr58lWe8l4kvTlYj5QMDZrh7evTtPFQ/GiXNFi2XhzsJ/sGunSV9wwRFkRQXPJuyMPoTXzsHDmHKqzBUf3oyUKnZMGxJHgV3hK2VgoLwcSeR7XO6ve1mYdFXStQKArmleWCIeAmP309Q=
  - secure: Z2jxIch92E9GP54vIyJD5zGqeH4ggnF0I82F66eTCC8qKMty7tDYHXwXWGBCDIofgVp5r0yIbZpLK4DcC/Ps8IcpxXjuop/pUiWfJj0ERW5aiM/8HcQvW6SLsvIYnNgYMV2bydIzHSpBHhJsuyk9rAzrYxHAqwCQeR+kzfv0qskgmwFT2DI61sQfYRlgGFnz50ta7xKj67l0Vg4S1iq77JEc90PyExsN22EZFu68AATM7vGlXI9GpDZUAWkNm++W8Dzp/TnuNLmlt9kG5UdNbu3G6mPgmgXwaG2adsKEXc1oOy24u2jbYx5DJ46TlDGsF8Bkdgut3VdPQL8DQJXLPY6XfxbjixzjXvTv0R+uWT/nbmoIzR1gXncgirljNXrqH0KfTPyKwX2OBTQ+Ap50XDayQ16FmqKbw+kEb7wnmUq0v9D7C1c2b7KDLNpDz2Go0sIVMFKze73+4TQLjrHJ9QwvUDcIqB81FuMR0f0AH9rccnMEj6BLQyrRpAnMn1YzfsEpCsKSZVD7Jjz1C1DKoj/VRNOe6uLIj6pduwC1gj3B2LBXPi63UUG67rDBRiHtdheiUz/qwv+Xn2+dWk8jruJp0FBJk1V2C6d7JpVnqRXj7ImeojT1xeJLYvGtlsgctgYIYMc/wsEZOUk7DBSZJ1a+ysek+7CU8haHFoLoC2s=
  - secure: auxU2762CvS+Jd7SPsfa1FEgg2LVanr1FCHAkK+dxV6KLdGCLzQPvdKF7DmpbvbbbsYIhZjkd74BlsMPD82zoV0iGPGjtCVKwQcMWxbPlN122qRA1Q+q6IZJzEJ1OiWm4oRqLh09vpOshGt+z4W5NATA/FrgOsYhNWcE4KKgVbA1jAm171EoFcrf8XYZK5KeQAkvkjDz9UWaKrVtsDAEgYK0DCQyXaQmbP9II04vimNNRTrlAYPUd6vuZ3hQd6PEGdZjFtQb1BrMjkpduNySf5FSJKpTd9fu/hxUUJgbof5zrBSfwgKScv1mcmkn8HpvrKLL77K76KYRbbs0rIwjsA+M9vS8t/1LNTlj5OG6BO4HYIHbw8fKbmNzGrmEtbHsafqPMsG1gD/SqwwL/ujjdxQwHL3fB7EoUNFoQOyYTsLd46wtE8QJJ2oGdQgk0ZjneWWEIsVOI0NHuVChyQfHt0msAWHvcczXPLZAbFRc/WKTCuihYkPtwUVysl+Zwnb26XZhYlrOGR7DUDRXAhZPt40yhxhoDlins+twm2E9gPQikIunUj0hAQXMTFsr2/gxKU+9iFUuMwa6Djb8Gj+tOBcYyriyl6ZzCZIwd9hk0X2+W9OBsJHtQonSosmOMQrM72sD6G4sHLQ41B10fwGIX/pUlzuubMw16e8caeL9MNs=
  - secure: bY1GeNvLVE/6cboP14ZeWHVCqZskptoY5J7q+rSqjQnhi/RVRHzxcvjSu0zp4YNnHV1EvdUOUqBIaastTEgsiuLDPzpM3aHgEDyoHG1u87jnXcZKul4KLVecONGSIUyVE3DbV9fcn21CLp0pW3SyE0qdlpEerR2FBnIZSNIkf3ydyw8RxmzG/6TXdwKoYyjlf3PdvQIEZBwojz9mUJE8hMzYzHx0Esupg3/xoD+mxCWdxKw6KSluFLotQX/kSubVYCb2n+2N0HwrIMdXC6GJlGNnRna1C/x9IB5G08xs5tiuUHZ9th8BAdblWOE1gKqOkH0mrsJDP4utpHOTlCfvYig9axaLs+hEfKL9jucR04vO1toeMZr8FooDJUx2U1h33iL4opk75NuO0t1ORPUWhlEPaFxXgn+dx+VhTVgwHR4lTUwn4W3UA0TZIYiD1Woa2aTqWkolmw4yuNDXdrgNtoclW8x3ZBLBYz37zUXg8eV5BNyKKgOCFI/kioty8EkE3KzF5H9tZmTFeS0y85Cm5apGu5TJymEiLeb6w2qb1HmET1IU1dpMXG6bwKNAuS6tnd3QwNxmfR1VyMd3JEjwUyDHD4+R8PiKi00YK9ceTCHqlF10kguzwtRyGHzDmI0d9mjqKvOKxa+wc8nK5QzZf1VOPqrALvAA3a60/Y7dwwk=
  - secure: yQSjOwceLTsVYDLKcO9M6HdX2HZ7gKBJvVVfK8ODmqz6KAK9MPtc16/x4n6hRCQB8WRzLxKYDzuCXqo07e7Q6EGQZdipvIzDB/o0oXpRr/h0nGNP8pMoxAbLsn5Pn/I+/FsidiDf/Azh6L3CRd/GNuY81nt/Q4MtBOGITrxKRH1bP6l0laeBivj+ldPyPL8ERe18NY5iMJwJZ5s3+VG53zal7kdWAFWw8th2jYwKNBLlQUjLo/QDje70rN8E4kzTZ4OEL0TvwaQ2qkAAEdV7iTb5czZnwsZBe5xwgrMWB/BPClPYO81qPMIzoOuKNlQD4RhQ7FSkmSySwMJeNZkSEu/GxSljBU3tmvB+YXCyhYt6m7xgQEp6beQhIXkVLlR7eSu2mno1Ad0X+NyMMHjG3QpsaO962SicAO7Nl2B6mz07f0z6Oy4/tUuTR/PEECIddW6NF5Ht/cYo1kSSoSPh3ap2+xQpgCAiHFcZp1LvO0Y/bOw35CWYrezZzuPIVeZLxCr9WjWA+q27h9amjRgM6tpp3QZwwXZyYZLai3l29dv1/6HTmSEx4GkpAGFRGhOz2kcMx6THu4A5Q5RXko3HIie8BkhvtupaaQFoTJYmdAz2K5L+LlJNM0z9gw/UYJo+PeyV939PVp9eWSaZ8UGGdUNLgMCGBcGZOlFjnu7V+js=
before_install:
- openssl aes-256-cbc -k $secret_for_files  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
